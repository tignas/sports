{% extends "templates/league/base.jinja2" %}
{% block extrahead %}
    <script src="/static/vendor/tablesorter.js"></script>
    <link rel="stylesheet" href="/static/css/league/players.css"/>
{% endblock %}

{% block league_content %}
<div id="options">
    <label for="stat_season">season</label>
    <select id="stat_season">
    {% for year in range(2001, 2013) %}
        <option value="{{year}}">{{year}}-{{year+1}}</option>
    {% endfor %}
    </select>
    {% if sport == 'basketball' %}
    {% set stat_types = ['36', 'game', 'season'] %}
    <label for="stat_type">stat type</label>
    <select id="stat_type">
    {% for stat_type in stat_types %}
        <option value="{{stat_type}}">per {{stat_type}}</option>
    {% endfor %}
    </select>
    {% endif %}
</div>
<div id="stat_tables">
{% if sport == 'basketball' %}
    {% include "templates/league/basketball/players.jinja2" %}
{% elif sport == 'football' %}
    {% include "templates/league/football/players.jinja2" %}
{% endif %}
</div>
{% endblock %}

{% block javascript %}
<script>
$(document).ready(function () {

$('.player_table').tablesorter();

$('#per_36').hide();
$('#per_game').hide();

$('#stat_type').on('change', function () {
    var stat_types = ['per_36', 'per_season', 'per_game']
    var stat_type = $(this).val();
    for (i in stat_types) {
        $('#' + stat_types[i]).hide();
    }
    $('#per_' + stat_type).show();
});

$('#stat_season').on('change', function () {
    var season = $(this).val();
    $.post('', {'season': season}, function(response) {
        $('#stat_tables').html(response);
        $('.player_table').tablesorter();
    });
});
});
</script>
{% endblock %}
